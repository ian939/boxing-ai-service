<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ë³µì‹± AI ë¶„ì„ ì„œë¹„ìŠ¤</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white flex flex-col items-center justify-center h-screen">
    <h1 class="text-4xl font-bold mb-8">ğŸ¥Š Boxing AI Analyzer</h1>
    
    <div id="upload-box" class="bg-gray-800 p-10 rounded-xl shadow-lg text-center border-2 border-dashed border-gray-600">
        <input type="file" id="videoInput" class="hidden" accept="video/*">
        <label for="videoInput" class="cursor-pointer">
            <div class="text-6xl mb-4">ğŸ“</div>
            <p class="text-xl">ìŠ¤íŒŒë§ ì˜ìƒì„ ì„ íƒí•˜ê±°ë‚˜ ëŒì–´ë‹¤ ë†“ìœ¼ì„¸ìš”</p>
            <p class="text-sm text-gray-400 mt-2">MP4 í˜•ì‹ ê¶Œì¥</p>
        </label>
        <button onclick="startAnalysis()" class="mt-8 bg-blue-600 hover:bg-blue-700 px-8 py-3 rounded-full font-bold transition-all">
            AI ë¶„ì„ ì‹œì‘í•˜ê¸°
        </button>
    </div>

    <div id="loading" class="hidden text-center">
        <div class="animate-spin text-6xl mb-4">âš™ï¸</div>
        <p class="text-2xl font-bold">AI ì½”ì¹˜ê°€ ì˜ìƒì„ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤...</p>
        <p class="text-gray-400 mt-2">ì•½ 1~2ë¶„ ì •ë„ ì†Œìš”ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
    </div>

    <script>
        async function startAnalysis() {
            const fileInput = document.getElementById('videoInput');
            if (!fileInput.files[0]) return alert("ì˜ìƒì„ ì„ íƒí•´ì£¼ì„¸ìš”!");

            // í™”ë©´ ì „í™˜
            document.getElementById('upload-box').classList.add('hidden');
            document.getElementById('loading').classList.remove('hidden');

            const formData = new FormData();
            formData.append('file', fileInput.files[0]);

            try {
                // ë°±ì—”ë“œ ì„œë²„(FastAPI)ë¡œ ë°ì´í„° ì „ì†¡
                const response = await fetch('http://localhost:8000/analyze', {
                    method: 'POST',
                    body: formData
                });
                const result = await response.json();

                // ì„±ê³µ ì‹œ ë¦¬í¬íŠ¸ ë°ì´í„°ë¥¼ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥í•˜ê³  ì´ë™
                localStorage.setItem('analysisResult', JSON.stringify(result));
                window.location.href = 'report.html'; 
            } catch (error) {
                alert("ë¶„ì„ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
                location.reload();
            }
        }
    </script>
</body>
</html>
